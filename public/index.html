<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>COGgpt â€” Research Q&A</title>
  <link rel="stylesheet" href="/styles.css"/>
  <style>
    :root { --brand:#ff7a00; --ink:#111; --muted:#5f6570; --line:#e9edf2; --soft:#fff7ed; --soft-border:#ffead6; }
    *{box-sizing:border-box}
    body { margin:0; background:#fff; color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    header { position:sticky; top:0; z-index:10; background:#fff; border-bottom:1px solid var(--line); }
    .bar { max-width:1080px; margin:0 auto; padding:12px 16px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .brand { font-weight:800; letter-spacing:.1px; display:flex; align-items:baseline; gap:4px; }
    .brand .cog { font-weight:800; }
    .brand .gpt { font-weight:400; color:var(--brand); } /* un-bold + orange */
    .beta { font-size:.9rem; color:var(--muted); font-weight:500; margin-left:6px; }
    .nav { display:flex; align-items:center; gap:10px; }
    #who { color:var(--muted); }

    .btn { display:inline-flex; align-items:center; justify-content:center; border-radius:10px; font-weight:700; cursor:pointer; text-decoration:none; }
    .btn.small { padding:10px 14px; font-size:.92rem; line-height:1; height:40px; }
    .btn.ghost { background:#fff; color:var(--ink); border:1px solid var(--line); }
    .btn.ghost:hover { background:var(--brand); border-color:var(--brand); color:#fff; }
    .btn.primary { background:var(--brand); color:#fff; border:0; padding:16px 22px; border-radius:18px; }

    main { max-width:960px; margin: 56px auto; padding: 0 16px; }
    .hero { text-align:center; margin: 8px 0 8px; }
    .hero h1 { font-size:34px; margin:0 0 6px 0; }
    .hero p { margin:0; color:var(--muted); }

    /* Client row */
    .client-row { display:flex; gap:12px; align-items:center; justify-content:center; margin:16px 0 6px; }
    .client-row .label { color:var(--muted); font-size:.95rem; }
    .client-row select { color:var(--muted); border:1px solid var(--line); background:#fff; border-radius:12px; padding:10px 12px; min-width:300px; font-size:0.95rem; }

    .askbox { display:flex; gap:12px; width:100%; margin:18px auto 0; }
    .askbox input { flex:1; padding:18px 20px; font-size:1.05rem; border-radius:18px; border:1px solid var(--line); background:#f7f7f7; color:var(--ink); } /* light grey prompt box */
    .askbox .btn.primary { background:var(--brand); color:#fff; } /* orange ask, white text */

    .panel { margin-top:22px; border:1px solid var(--line); border-radius:14px; padding:14px; background:#fff; }
    .panel h3 { margin:0 0 8px 0; font-size:0.95rem; color:var(--muted); font-weight:600; }
    .answer-panel { background:var(--soft); border-color:var(--soft-border); }
    .answer-body { white-space:pre-wrap; line-height:1.55; font-size:1.02rem; }

    .refs-ol { padding-left: 20px; margin: 0; } /* remove extra space between refs */
    .refs-ol li { margin: 6px 0; }
    .ref-link { margin-left:6px; }
    a.link { color:#0b57d0; text-decoration:none; }
    .muted { color:var(--muted); }

    /* Additional Detail bullets */
    #supportCard ul { margin: 0; padding-left: 18px; }
    #showMoreBtn { margin-top:8px; }

    /* Slide snapshots grid */
    #slidesGrid { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:10px; }
    #slidesGrid img { width:100%; border-radius:10px; border:1px solid var(--line); }
    .msg { margin-top:14px; border:1px solid var(--line); background:#fafbfd; color:#2b2f36; border-radius:10px; padding:10px 12px; display:none; }
    .msg.error { background:#fff5f5; color:#8b0000; display:block; }
    .msg.info { display:block; }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div>
        <span class="brand"><span class="cog">COG</span><span class="gpt">gpt</span></span><span class="beta">(BETA)</span>
      </div>
      <div class="nav">
        <div id="who"></div>
        <a id="adminLink" class="btn small ghost" href="/admin" style="display:none;">Admin</a>
        <button id="logoutBtn" class="btn small ghost" title="Sign out">Sign out</button>
      </div>
    </div>
  </header>

  <main>
    <div class="hero">
      <h1>Ask about your research.</h1> <!-- add period -->
      <p class="muted">Search across your uploaded reports, questionnaires, and data.</p>
    </div>

    <div class="client-row" id="clientRow" style="display:none;">
      <div class="label">Client Library</div> <!-- capitalization -->
      <select id="client">
        <option value="" selected disabled>Select a client</option>
      </select>
    </div>

    <div class="askbox">
      <input id="q" placeholder="e.g., What has satisfaction for Product X looked like over the past few years?"/>
      <button id="ask" class="btn primary" disabled>Ask</button>
    </div>

    <div id="msg" class="msg"></div>

    <div id="out" style="display:none;">
      <div id="answerPanel" class="panel answer-panel" style="display:none;">
        <h3>Answer</h3>
        <div id="answer" class="answer-body"></div>
      </div>

      <!-- Additional Detail (bullets + show more) -->
      <div id="supportCard" class="panel" style="display:none;">
        <h3>Additional Detail</h3>
        <ul id="supportList"></ul>
        <button id="showMoreBtn" class="btn small ghost" style="display:none;">Show more</button>
      </div>

      <!-- References -->
      <div id="refsCard" class="panel" style="display:none;">
        <h3>References</h3>
        <ol id="refs" class="refs-ol"></ol>
      </div>

      <!-- Slide snapshots -->
      <div id="slidesCard" class="panel" style="display:none;">
        <h3>Report Slides</h3>
        <div id="slidesGrid"></div>
      </div>
    </div>
  </main>

<script src="/app.js" defer></script>
</body>
</html>
